# DB 쿼리(SQL) 기초: 테스터가 직접 데이터를 조회하고 수정해야 하는 이유

테스터가 UI 화면만 보고 테스트를 수행하는 것은 빙산의 일각만 보는 것과 같습니다. 데이터가 화면에 올바르게 표시되더라도, 실제 DB 내부에서는 데이터가 꼬여 있거나 중복 저장되는 등의 '시한폭탄' 같은 결함이 숨어 있을 수 있기 때문입니다.

테스터가 직접 **SQL(Structured Query Language)**을 다루며 DB를 조회하고 수정해야 하는 실무적인 이유와 핵심 쿼리문을 정리해 드립니다.

## 📂 [테스트 수행] DB 쿼리(SQL) 실무: 테스터의 필수 역량

### 1. 테스터가 직접 DB를 다뤄야 하는 3가지 이유

#### ① 데이터 정합성(Integrity)의 최종 검증

- **상황**: 화면에는 "결제 완료"라고 뜨지만, 실제 DB의 결제 상태값은 여전히 "대기(Pending)"라면?

- **이유**: UI는 단순히 서버가 주는 값을 뿌려줄 뿐입니다. 실제 비즈니스 로직이 DB에 정확한 데이터 입력을 완료했는지 확인하려면 직접 DB를 열어봐야 합니다.

#### ② 테스트 데이터 생성 및 초기화의 효율성

- **상황**: "신규 가입 유저" 테스트를 위해 매번 다른 이메일로 가입 절차를 밟아야 한다면?

- **이유**: 직접 DB에서 특정 유저의 가입일자를 수정하거나 가입 상태를 변경함으로써, 복잡한 UI 절차 없이 즉시 특수한 테스트 상태를 만들 수 있습니다.

#### ③ 복잡한 조건의 결함 추적 (Back-end Testing)

- **상황**: 특정 상품이 검색 결과에 나오지 않을 때.

- **이유**: 검색 조건 쿼리가 DB에서 어떻게 실행되는지 확인하여, '데이터 자체가 없는 것'인지 '쿼리 조건(Where절)이 잘못된 것'인지 명확히 구분해 개발자에게 전달할 수 있습니다.

### 2. 테스터가 반드시 알아야 할 필수 SQL 구문

#### 🔍 데이터 조회 (SELECT): "데이터가 잘 들어갔나?"

가장 많이 사용하는 구문입니다. 화면에 보이는 값과 DB 값이 일치하는지 대조합니다.

```sql
-- 특정 아이디를 가진 유저의 상태값 확인
SELECT user_id, user_name, status, last_login_date 
FROM users 
WHERE user_id = 'test_user_01';
```

#### ✍️ 데이터 수정 (UPDATE): "테스트 조건을 바로 만들자"

특정 계정을 휴면 계정으로 만들거나, 포인트 잔액을 조절할 때 사용합니다.

```sql
-- 테스트를 위해 포인트 잔액을 0으로 강제 수정
UPDATE user_account 
SET point_balance = 0 
WHERE user_id = 'test_user_01';
```

#### 🗑️ 데이터 삭제 (DELETE): "테스트 흔적 지우기"

중복 가입 테스트 등을 위해 가입된 정보를 삭제할 때 사용합니다.

```sql
-- 특정 테스트 계정 정보 삭제
DELETE FROM users WHERE user_id = 'test_user_01';
```

### 3. 실무 팁: 테스터를 위한 SQL 주의사항

- **SELECT부터 하라**: UPDATE나 DELETE를 하기 전, 반드시 SELECT문으로 내가 건드리는 데이터가 맞는지 확인하세요.

- **WHERE절은 필수**: WHERE절 없이 UPDATE를 실행하면 전체 유저의 데이터가 바뀌는 대참사가 일어납니다. (테스트 환경이라도 주의!)

- **커밋(Commit)과 롤백(Rollback)**: 수정한 내용이 반영되지 않는다면 COMMIT을 했는지 확인하고, 실수했다면 즉시 ROLLBACK을 시도하세요. (DB 설정에 따라 다름)

## 📝 실무 활용 예시 (결함 보고서 작성 시)

#### [결함 요약] 
회원 탈퇴 후 동일 아이디로 재가입 불가 결함

#### [현상 확인] 
UI상으로는 탈퇴 완료 팝업이 노출되나, 동일 아이디로 가입 시 "이미 존재하는 아이디" 메시지 발생.

#### [DB 조회 결과] 
> SELECT status FROM users WHERE user_id = 'tester01'; 실행 시 상태값이 'D(Deleted)'가 아닌 'A(Active)'로 유지되고 있음.

#### [의견] 
탈퇴 처리 시 DB Update 로직이 누락된 것으로 보입니다.

## 💡 테스터를 위한 한 줄 전략

"SQL은 테스터에게 현미경과 같습니다." 겉으로 보이는 화면에 속지 않고, 시스템의 본질인 데이터를 직접 검증할 때 비로소 빈틈없는 테스팅이 완성됩니다.