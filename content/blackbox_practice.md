# [기법] 영리한 테스트 설계

**"무식하게 다 누르지 마세요. 이론을 섞으세요."**

---

## 왜 체계적인 테스트 설계가 필요한가?

무작위 테스트는 시간 낭비입니다. 체계적인 기법을 사용하면:
- 테스트 케이스 수 **70% 감소**
- 결함 발견율 **40% 증가**
- 테스트 커버리지 **명확히 측정** 가능

---

## 경계값 분석 (Boundary Value Analysis)

### 핵심 개념
결함은 경계에서 발생합니다. 최소값, 최대값, 그 주변값을 집중 테스트하세요.

### 실전 예제 1: 나이 입력 필드

**요구사항**: 나이는 0 ~ 120 사이 정수

**테스트 케이스 설계:**

| 테스트 값 | 분류 | 기대 결과 |
|----------|------|-----------|
| -1 | 최소값 - 1 | 거부 |
| 0 | 최소값 | 허용 |
| 1 | 최소값 + 1 | 허용 |
| 60 | 중간값 | 허용 |
| 119 | 최대값 - 1 | 허용 |
| 120 | 최대값 | 허용 |
| 121 | 최대값 + 1 | 거부 |

**총 7개 테스트 케이스로 효율적 검증**

### 실전 예제 2: 할인율 계산

**요구사항**:
- 구매 금액 10,000원 이상: 5% 할인
- 구매 금액 50,000원 이상: 10% 할인
- 구매 금액 100,000원 이상: 15% 할인

**경계값 테스트:**

| 금액 | 경계 분류 | 예상 할인율 |
|------|-----------|-------------|
| 9,999 | 첫 번째 경계 - 1 | 0% |
| 10,000 | 첫 번째 경계 | 5% |
| 10,001 | 첫 번째 경계 + 1 | 5% |
| 49,999 | 두 번째 경계 - 1 | 5% |
| 50,000 | 두 번째 경계 | 10% |
| 50,001 | 두 번째 경계 + 1 | 10% |
| 99,999 | 세 번째 경계 - 1 | 10% |
| 100,000 | 세 번째 경계 | 15% |
| 100,001 | 세 번째 경계 + 1 | 15% |

**발견 가능한 일반적 버그:**
- `>=` 대신 `>` 사용으로 경계값 처리 오류
- 부동소수점 연산 오류
- 조건문 순서 오류

---

## 동등 분할 (Equivalence Partitioning)

### 핵심 개념
입력값을 유효/무효 클래스로 나누고, 각 클래스에서 대표값 하나씩만 테스트합니다.

### 실전 예제 3: 이메일 유효성 검사

**요구사항**: 유효한 이메일 형식 검증

**동등 분할:**

| 클래스 | 설명 | 대표 테스트 값 | 기대 결과 |
|-------|------|----------------|-----------|
| 유효 클래스 1 | 정상 이메일 | user@example.com | 허용 |
| 유효 클래스 2 | 점(.) 포함 | user.name@example.com | 허용 |
| 유효 클래스 3 | 숫자 포함 | user123@example.com | 허용 |
| 무효 클래스 1 | @ 없음 | userexample.com | 거부 |
| 무효 클래스 2 | @ 2개 이상 | user@@example.com | 거부 |
| 무효 클래스 3 | 도메인 없음 | user@ | 거부 |
| 무효 클래스 4 | 공백 포함 | user @example.com | 거부 |
| 무효 클래스 5 | 특수문자 | user!#$@example.com | 거부 |

### 실전 예제 4: 파일 업로드

**요구사항**:
- 허용 확장자: jpg, png, pdf
- 최대 크기: 5MB

**동등 분할:**

| 클래스 유형 | 조건 | 테스트 케이스 | 기대 결과 |
|-----------|------|---------------|-----------|
| 유효 | 허용 확장자 + 크기 OK | test.jpg (3MB) | 성공 |
| 유효 | 허용 확장자 + 크기 OK | test.png (1MB) | 성공 |
| 유효 | 허용 확장자 + 크기 OK | test.pdf (4MB) | 성공 |
| 무효 | 불허 확장자 | test.exe (1MB) | 실패 |
| 무효 | 크기 초과 | test.jpg (6MB) | 실패 |
| 무효 | 확장자 없음 | testfile (1MB) | 실패 |

---

## 조합 테스트: Pairwise Testing

### 실전 예제 5: 로그인 기능

**변수:**
- 사용자명: 유효/무효
- 비밀번호: 유효/무효
- 2FA 코드: 유효/무효

**전체 조합**: 2 × 2 × 2 = 8가지
**Pairwise**: 4가지로 축소 가능

| 테스트 # | 사용자명 | 비밀번호 | 2FA | 기대 결과 |
|----------|---------|---------|-----|-----------|
| 1 | 유효 | 유효 | 유효 | 로그인 성공 |
| 2 | 유효 | 무효 | 무효 | 비밀번호 오류 |
| 3 | 무효 | 유효 | 무효 | 사용자명 오류 |
| 4 | 무효 | 무효 | 유효 | 사용자명 오류 |

**도구**: [PICT (Microsoft)](https://github.com/Microsoft/pict) - 조합 테스트 자동 생성

---

## 결정 테이블 (Decision Table)

### 실전 예제 6: 배송비 계산

**규칙:**
- 회원 등급: 일반/VIP
- 구매 금액: 30,000원 미만/이상
- 지역: 서울/지방

| 조건 | 규칙1 | 규칙2 | 규칙3 | 규칙4 | 규칙5 | 규칙6 | 규칙7 | 규칙8 |
|-----|------|------|------|------|------|------|------|------|
| VIP 회원 | Y | Y | Y | Y | N | N | N | N |
| 30,000원 이상 | Y | Y | N | N | Y | Y | N | N |
| 서울 지역 | Y | N | Y | N | Y | N | Y | N |
| **배송비** | **0원** | **0원** | **2,500원** | **3,500원** | **0원** | **3,000원** | **3,000원** | **4,000원** |

---

## 상태 전이 테스트

### 실전 예제 7: 주문 상태 관리

```
[주문 접수] → [결제 완료] → [배송 중] → [배송 완료]
     ↓            ↓            ↓
  [취소]       [취소]      [반품 요청]
```

**테스트 케이스:**
1. 정상 플로우: 접수 → 결제 → 배송 → 완료
2. 결제 전 취소: 접수 → 취소
3. 결제 후 취소: 접수 → 결제 → 취소
4. 배송 후 반품: 접수 → 결제 → 배송 → 반품
5. **잘못된 전이 검증**: 완료 → 결제 (불가능해야 함)

---

## 실무 팁

### 1. 테스트 케이스 우선순위 지정

**MoSCoW 기법:**
- **Must**: 핵심 기능 (예: 로그인, 결제)
- **Should**: 중요 기능 (예: 검색, 필터)
- **Could**: 부가 기능 (예: 추천, 공유)
- **Won't**: 이번 릴리즈에서 제외

**시간이 부족할 때**: Must → Should 순으로 테스트

### 2. 탐색적 테스트 병행

체계적 테스트 후 30분~1시간 자유롭게 탐색:
```
✓ 예상치 못한 조합 시도
✓ 극단적인 시나리오 테스트
✓ 사용자 입장에서 "이상한" 행동 시도
```

### 3. 테스트 케이스 템플릿

```markdown
## TC-001: 정상적인 로그인

**전제 조건**:
- 등록된 사용자 계정 존재 (user: test@example.com, pw: Test1234!)

**테스트 단계**:
1. 로그인 페이지 접속
2. 이메일 입력: test@example.com
3. 비밀번호 입력: Test1234!
4. 로그인 버튼 클릭

**기대 결과**:
- 메인 페이지로 이동
- 우측 상단에 사용자 이름 표시
- 로그아웃 버튼 표시

**실제 결과**:
(테스트 실행 후 작성)

**상태**: PASS / FAIL
```

### 4. 실무 효율성 팁

| 상황 | 추천 기법 | 이유 |
|-----|----------|------|
| 숫자/날짜 입력 | 경계값 분석 | 경계 오류 빈번 |
| 드롭다운/라디오 버튼 | 동등 분할 | 선택지 명확 |
| 복잡한 비즈니스 로직 | 결정 테이블 | 조건 조합 관리 |
| 워크플로우 테스트 | 상태 전이 | 상태 변화 추적 |
| 다중 변수 조합 | Pairwise | 케이스 수 감소 |

---

## 실전 사례

### 사례 1: 할인율 계산 버그 발견

**상황**: 전자상거래 사이트 할인 기능 테스트

**적용 기법**: 경계값 분석

**발견 버그**:
```javascript
// 잘못된 코드
if (amount > 100000) { discount = 0.15; }
// 100,000원 정확히는 할인 안됨!

// 올바른 코드
if (amount >= 100000) { discount = 0.15; }
```

**영향**: 100,000원 주문 고객 할인 미적용 → 고객 불만 예방

### 사례 2: 조합 폭발 문제 해결

**상황**: 검색 필터 기능 (카테고리 5개 × 가격대 4개 × 정렬 3개 = 60가지)

**해결**: Pairwise Testing 적용 → 15개 테스트 케이스로 축소

**결과**: 테스트 시간 75% 절감, 주요 조합 버그 모두 발견

### 사례 3: 상태 전이 버그

**상황**: 주문 시스템에서 "배송 완료 → 결제 대기" 전이 가능

**문제**: 상태 전이 검증 누락

**해결**: 상태 전이 다이어그램 작성 및 불가능한 전이 테스트 추가

**효과**: 데이터 무결성 오류 사전 방지

---

## 실무 워크숍: 테스트 케이스 설계 실습

### 연습 문제 1: 비밀번호 변경 기능

**요구사항:**
- 현재 비밀번호 확인
- 새 비밀번호: 8~20자, 영문+숫자+특수문자 필수
- 새 비밀번호 확인 입력 일치

**과제**: 경계값 분석과 동등 분할을 적용하여 테스트 케이스 설계

<details>
<summary>예시 답안</summary>

**경계값 테스트 (길이):**
- 7자 (거부)
- 8자 (허용)
- 14자 (허용)
- 20자 (허용)
- 21자 (거부)

**동등 분할 (형식):**
- 유효: abc123!@# (모든 조건 만족)
- 무효: abcdefgh (숫자/특수문자 없음)
- 무효: 12345678 (영문/특수문자 없음)
- 무효: abcd1234 (특수문자 없음)

**기타 시나리오:**
- 현재 비밀번호 오류
- 새 비밀번호 불일치
- 현재 비밀번호와 신규 비밀번호 동일

</details>

### 연습 문제 2: 결정 테이블 작성

**요구사항**: 대출 승인 시스템
- 신용 점수: 700점 이상/미만
- 소득: 3000만원 이상/미만
- 재직 기간: 1년 이상/미만

**과제**: 결정 테이블을 작성하고 승인/거부 조건 정의

<details>
<summary>예시 답안</summary>

| 조건 | R1 | R2 | R3 | R4 | R5 | R6 | R7 | R8 |
|-----|----|----|----|----|----|----|----|----|
| 신용 700+ | Y | Y | Y | Y | N | N | N | N |
| 소득 3000+ | Y | Y | N | N | Y | Y | N | N |
| 재직 1년+ | Y | N | Y | N | Y | N | Y | N |
| **승인 여부** | **승인** | **승인** | **승인** | **거부** | **조건부** | **거부** | **거부** | **거부** |

</details>

---

## 추천 도구

| 도구 | 용도 | 링크 |
|-----|------|------|
| PICT | Pairwise 조합 생성 | [GitHub](https://github.com/Microsoft/pict) |
| TestRail | 테스트 케이스 관리 | [공식 사이트](https://www.testrail.com) |
| Xmind | 마인드맵, 상태 전이도 | [공식 사이트](https://www.xmind.net) |
| Draw.io | 결정 테이블, 다이어그램 | [공식 사이트](https://www.drawio.com) |
